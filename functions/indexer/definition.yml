# TODO: set up execution limits
# max retries for erroring record
# dead letter queue
# Alarms --> email
---
Indexer:
  handler: functions/indexer/handler.IndexRecords
  role: IndexerLambdaRole
  environment:
    ES_ENDPOINT:
      Fn::ImportValue: 'GhostsESDomainEndpoint-${opt:stage, self:provider.stage}'
  events:
    - stream:
        type: dynamodb
        arn:
          Fn::ImportValue: 'EntriesTableStreamArn-${opt:stage, self:provider.stage}'
